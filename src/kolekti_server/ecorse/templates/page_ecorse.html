<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>EcoRSE {% block page-title %}{% endblock %}</title>
		<link rel="icon" href="/static/kolekti.png">
		
		<!-- Bootstrap -->
		{% if DEBUG %} {# paramètre DEBUG dans /media/donnees/web/ecorse/kolekti/src/kolekti_server/kolekti_server/settings.py #}
			{% with use_bsless=False %}
				<!-- Bootstrap -->
				{% if use_bsless %}				
					<link rel="stylesheet/less" type="text/css" href="/static/bootstrap/less/bootstrap.less"/>
				{% else %}
					<link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
				{% endif %}			
				<!-- <div>{{ use_bsless }}</div> -->
			{% endwith %}
			<!-- Custom styles for this template -->
			<link rel="stylesheet/less" type="text/css" href="/static/less/ecorse.less"/>
			<script type="text/javascript">
			  less = {
			  env: "development",
			  dumpLineNumbers: "mediaquery"
			  //dumpLineNumbers: "comments"
			  };
			</script>
			<script type="text/javascript" src="/static/js/less.min.js"></script>
		{% else %}
			<link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
			<link href="/static/css/ecorse.css" rel="stylesheet">			
		{% endif %}
			<link href="/static/css/ecorse-topics.css" rel="stylesheet">
		<!-- Font Awesome -->
		<link href="/static/font-awesome/css/font-awesome.min.css" rel="stylesheet">

		{% block extracss %}{% endblock %}
		
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

	</head>

	<body role="document">



		{% if release %}
		<div class="hidden-xs">
			<div id="mySidenav" class="sidenav">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-12">
							<div class="sidebar">						
						        {% block sidebar %}{% endblock %}		
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>	
		{% endif %}



		<!-- Fixed navbar -->
		<nav class="navbar navbar-ecorse navbar-fixed-top">
			<div class="container-fluid">
				<div class="navbar-header">
					<button id="closeNavBtn" type="button" class="btn btn-default navbar-btn hidden-xs" title="Cacher le menu" style="display:none;">
						<i class="fa fa-times"></i>
					</button>
					<button id="openNavBtn" type="button" class="btn btn-default navbar-btn hidden-xs" title="Afficher le menu">
						<i class="fa fa-reorder"></i>
					</button> 
					<button class="navbar-toggle collapsed btn btn-default navbar-btn" type="button" id="hide-menu"  data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
								<a href="javascript:void(0);" data-action="toggleMenu" title="Afficher/Cacher le menu"><i class="fa fa-reorder"></i></a>
							</button>
					<a class="navbar-brand page-scroll" href="http://www.ecorse.eu"><img height="40px" src="/static/img/logo.png" alt="logo Ecorse"></a>
				</div>
				<div id="navbar" class="navbar-collapse collapse">
					{% if release %}
					<ul class="nav navbar-nav">
					    <li class="active"><a href="/">Accueil</a></li>
					    {% if user.is_authenticated %}  
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Rapports &nbsp;<span class="caret"></span></a>
							<ul class="dropdown-menu">
								{% for release in releases %}
									<li class="{% if release.name == current %} active{% endif %}" >
										<a href="{% url 'elocusreport' %}?release=/releases/{{release.name}}">{{release.label}}</a>
									</li>
								{% endfor %}
								{% if releases %}
								<li role="separator" class="divider"></li>
								{% endif %}
								<li>
									<a href="#" class="ecorse-action-create-report" data-toggle="modal" data-target="#modal_create">Créer rapport... </a>
								</li>

							
							</ul>
						</li>
						{% endif %}
					</ul>
					{% endif %}

					<ul class="nav navbar-nav navbar-right">
					    {% comment %}
					    <li>
					    	<a href="http://www.ecorse.eu">À propos</a>
					    </li>
					    {% endcomment %}
					    {% if user.is_authenticated %}    
					    <li class="dropdown">
					        <a href="#" data-toggle="dropdown" class="dropdown-toggle active" aria-expanded="false">
                                <i class="fa fa-user fa-fw"></i> {{ user.first_name }} {{ user.last_name }}&nbsp;<span class="caret"></span></i>
                            </a>
                            <ul class="dropdown-menu dropdown-user">
								<li>
									<a href="{% url 'user_profile' %}"><i class="fa fa-user fa-fw"></i> Mon profil</a>
								</li>
								{% comment %}
								<li>
									<a href="#"><i class="fa fa-gear fa-fw"></i> Configuration</a>
								</li>
								{% endcomment %}
								<li class="divider"></li>
								<li>
									<a href="{% url 'logout' %}?next=/elocus/"><i class="fa fa-sign-out fa-fw"></i> Déconnexion</a>
								</li>
                            </ul>
                            <!-- /.dropdown-user -->
                        </li>
                        {% endif %}
						{% comment %}
                        <li>
							<form class="navbar-form navbar-left" role="search">
								<div class="form-group input-group custom-search-form">
                                    <input type="text" placeholder="Search..." class="form-control">
	                                <span class="input-group-btn">
	                                <button type="button" class="btn btn-default">
	                                    <i class="fa fa-search"></i>
	                                </button>
	                            </span>
	                            </div>
                            </form>
		    			</li>
						{% endcomment %}
						<li>
							<button id="fullscreen" type="button" class="btn btn-default navbar-btn hidden-xs" data-toggle="modal" data-target="#FullScreenModal">
								<a title="Plein écran" data-action="launchFullscreen" href="javascript:void(0);"><i class="fa fa-arrows-alt"></i></a>
							</button>
						</li>
					</ul>
					
				</div><!--/.nav-collapse -->
			</div>
		</nav>

		{% comment "Test variables with" %}		
			{% with test=True %}
							
				<div class="jumbotron">
				  <h1>
				  	{{ test }}
				  	{% if test %}
						___test true				
					{% else %}
						___test false				
					{% endif %}
				  </h1>
				</div>
			{% endwith %}
		{% endcomment %}	
	

		{% block page-content %}{% endblock %}


		<footer class="footer">
	        <div class="container-fluid">
	            <div class="row">
	                <div class="col-md-12">
	                    <span class="copyright">Copyright © 2016</span>
	                </div>
	                
	                {% comment %}
	                <div class="col-md-offset-4 col-md-4">
	                    <ul class="list-inline social-buttons">
	                        <li><a href="https://twitter.com/ecorse"><i class="fa fa-twitter"></i></a>
	                        </li>
	                        <li><a href="https://www.facebook.com/ecorse/"><i class="fa fa-facebook"></i></a>
	                        </li>          
	                    </ul>
	                </div>
	                {% endcomment %}
	            </div>
	        </div>
	    </footer>

		<!-- Bouton retour haut de page -->
	    <div id="toTop">
			<a id="topTopLink" href="#" title="haut de page"><i class="fa fa-level-up fa-2x" aria-hidden="true"></i></a>
		</div>

		<!-- Modal pour explication full screen -->
		<div class="modal fade hidden-xs" id="FullScreenModal" tabindex="-1" role="dialog" aria-labelledby="FullScreenModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">Passer en mode plein écran</h4>
					</div>
					<div class="modal-body">
						<p>
							Pour enclencher la fonction plein écran, utilisez la touche <strong>F11</strong> de votre clavier. Celle-ci permet de faire basculer votre navigateur entre le mode normal et le mode plein écran.<br>
							Pour sortir du mode plein écran, utilisez la touche <strong>echap</strong> ou de nouveau la touche F11.  
						</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
					</div>
				</div>
			</div>
		</div>

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="/static/jquery.js"></script>
		<script src="/static/jquery-ui.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="/static/bootstrap/js/bootstrap.min.js"></script>
		<script src="/static/bootstrap3-typeahead.min.js"></script>
		
		{# <script src="/settings.js"></script> #}
		<!--
		<script src="/static/js/kolekti-utils.js"></script>
		<script src="/static/js/kolekti-common.js"></script>
		-->

		{# scripts additionnels Felix #}
		{# retiré car sort du plein écran lorsqu'on change d'url <script src="/static/js/screenfull.min.js"></script> cf. https://github.com/sindresorhus/screenfull.js #}
		<script src="/static/js/kolekti-ecorse-report-widgets.js"></script>
		<script>			

			// retour haut de page
			$(window).scroll(function(){
				posScroll = $(document).scrollTop();
				if(posScroll >=300) {
					$('#topTopLink').fadeIn(600);
					$('#topTopLink').css('display','block');
				} else {
					$('#topTopLink').fadeOut(600);
				}
			});
			$('#topTopLink').click(function(){
				$('html').animate({scrollTop:0}, 'slow');
				return false;
			});

			//Sidenav Push Content 
			/* Set the width of the side navigation to 250px and the left margin of the page content to 250px */
			function openNav() {
			    $("#mySidenav").css("width", "300px");			    
			    $("#bootstrapContent").css("marginLeft", "300px");
			    $("#openNavBtn").hide('400');
			    $("#closeNavBtn").show('400');
			}

			/* Set the width of the side navigation to 0 and the left margin of the page content to 0 */
			function closeNav() {
			    $("#mySidenav").css("width", "0");			    
			    $("#bootstrapContent").css("marginLeft", "0");
			    $("#closeNavBtn").hide('400');
		$("#openNavBtn").show('400');
			}

			$("#closeNavBtn").hide('0');
			$('#openNavBtn').click(function(){
		openNav();
		setTimeout(function () {
		$('body').trigger('redraw.elocus.topics');
		}, 500);

		
			});
			$('#closeNavBtn').click(function(){
		closeNav();
		setTimeout(function () {
		$('body').trigger('redraw.elocus.topics');
		}, 500);

			});

			/* $('.sidebar').affix({
			    offset: {
			        top: 100,
			        bottom: function () {
			            return (this.bottom = $('.footer').outerHeight(true))
			        }
			    }
			}) */
		</script>
		{# fin scripts additionnels Felix #}
	
		{% block extrascripts %}{% endblock %}
	
	</body>
</html>
