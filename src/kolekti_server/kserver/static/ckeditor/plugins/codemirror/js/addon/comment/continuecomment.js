(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){function n(c){if(c.getOption("disableInput"))return e.Pass;for(var d=c.listSelections(),a,j=[],k=0;k<d.length;k++){var f=d[k].head,g=c.getTokenAt(f);if("comment"!=g.type)return e.Pass;var b=e.innerMode(c.getMode(),g.state).mode;if(a){if(a!=b)return e.Pass}else a=b;b=null;if(a.blockCommentStart&&a.blockCommentContinue){var i=
g.string.indexOf(a.blockCommentEnd),l=c.getRange(e.Pos(f.line,0),e.Pos(f.line,g.end)),h;if(!(-1!=i&&i==g.string.length-a.blockCommentEnd.length&&f.ch>=i))if(0==g.string.indexOf(a.blockCommentStart)){if(b=l.slice(0,g.start),!/^\s*$/.test(b)){b="";for(i=0;i<g.start;++i)b+=" "}}else if(-1!=(h=l.indexOf(a.blockCommentContinue))&&h+a.blockCommentContinue.length>g.start&&/^\s*$/.test(l.slice(0,h)))b=l.slice(0,h);null!=b&&(b+=a.blockCommentContinue)}null==b&&(a.lineComment&&o(c))&&(f=c.getLine(f.line),h=
f.indexOf(a.lineComment),-1<h&&(b=f.slice(0,h),b=/\S/.test(b)?null:b+(a.lineComment+f.slice(h+a.lineComment.length).match(/^\s*/)[0])));if(null==b)return e.Pass;j[k]="\n"+b}c.operation(function(){for(var a=d.length-1;0<=a;a--)c.replaceRange(j[a],d[a].from(),d[a].to(),"+insert")})}function o(c){return(c=c.getOption("continueComments"))&&"object"==typeof c?!1!==c.continueLineComment:!0}for(var m=["clike","css","javascript"],j=0;j<m.length;++j)e.extendMode(m[j],{blockCommentContinue:" * "});e.defineOption("continueComments",
null,function(c,d,a){a&&a!=e.Init&&c.removeKeyMap("continueComment");d&&(a="Enter","string"==typeof d?a=d:"object"==typeof d&&d.key&&(a=d.key),d={name:"continueComment"},d[a]=n,c.addKeyMap(d))})});