(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.registerGlobalHelper("fold","comment",function(b){return b.blockCommentStart&&b.blockCommentEnd},function(e,j){var f=e.getModeAt(j),k=f.blockCommentStart,f=f.blockCommentEnd;if(k&&f){for(var d=j.line,g=e.getLine(d),l,a=j.ch,h=0;;)if(a=0>=a?-1:g.lastIndexOf(k,a-1),-1==a){if(1==h)return;h=1;a=g.length}else{if(1==
h&&a<j.ch)return;if(/comment/.test(e.getTokenTypeAt(b.Pos(d,a+1)))){l=a+k.length;break}a-=1}var g=1,h=e.lastLine(),m,o,a=d;a:for(;a<=h;++a)for(var i=e.getLine(a),c=a==d?l:0;;){var n=i.indexOf(k,c),c=i.indexOf(f,c);0>n&&(n=i.length);0>c&&(c=i.length);c=Math.min(n,c);if(c==i.length)break;if(c==n)++g;else if(!--g){m=a;o=c;break a}++c}if(!(null==m||d==m&&o==l))return{from:b.Pos(d,l),to:b.Pos(m,o)}}})});