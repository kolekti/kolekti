CodeMirror.defineMode("bbcodemixed",function(g){var f,j,l,m,n,o,h;function k(b){return b.replace(/([\[\]\.\-\+\<\>\?\:\(\)\{\}])/g,"\\$1")}var i,c=CodeMirror.getMode(g,"htmlmixed"),d=CodeMirror.getMode(g,"bbcode");h="literal";g.hasOwnProperty("bbCodeLiteral")&&(h=g.bbCodeLiteral);l=/.*\[/;m=/[^\<\>]*\[/;n=RegExp(k("["+h+"]"));o=RegExp(k("[/"+h+"]"));i={chain:function(b,a,e){a.tokenize=e;return e(b,a)},cleanChain:function(b,a,e){a.tokenize=null;a.localState=null;a.localMode=null;return typeof e=="string"?
e?e:null:e(b,a)},maybeBackup:function(b,a,e){var a=k(a),c=b.current(),d=c.search(a);if(d>-1)b.backUp(c.length-d);else if(c.match(/<\/?$/)){b.backUp(c.length);b.match(a,false)||b.match(c[0])}return e}};f=function(b,a){if(!a.inLiteral&&b.match(m,false)&&a.htmlMixedState.htmlState.tagName===null){a.tokenize=j;a.localMode=d;a.localState=d.startState(c.indent(a.htmlMixedState,""));return i.maybeBackup(b,"[",d.token(b,a.localState))}if(!a.inLiteral&&b.match("[",false)){a.tokenize=j;a.localMode=d;a.localState=
d.startState(c.indent(a.htmlMixedState,""));return i.maybeBackup(b,"[",d.token(b,a.localState))}return c.token(b,a.htmlMixedState)};j=function(b,a){if(b.match("]",false)){b.eat("]");a.tokenize=f;a.localMode=c;a.localState=a.htmlMixedState;return"tag"}return i.maybeBackup(b,"]",d.token(b,a.localState))};return{startState:function(){var b=c.startState();return{token:f,localMode:null,localState:null,htmlMixedState:b,tokenize:null,inLiteral:false}},copyState:function(b){var a=null,e=b.tokenize||b.token;
b.localState&&(a=CodeMirror.copyState(e!=f?d:c,b.localState));return{token:b.token,tokenize:b.tokenize,localMode:b.localMode,localState:a,htmlMixedState:CodeMirror.copyState(c,b.htmlMixedState),inLiteral:b.inLiteral}},token:function(b,a){if(b.match("[",false)){if(!a.inLiteral&&b.match(n,true)){a.inLiteral=true;return"keyword"}if(a.inLiteral&&b.match(o,true)){a.inLiteral=false;return"keyword"}}if(a.inLiteral&&a.localState!=a.htmlMixedState){a.tokenize=f;a.localMode=c;a.localState=a.htmlMixedState}return(a.tokenize||
a.token)(b,a)},indent:function(b,a){return b.localMode==d||b.inLiteral&&!b.localMode||l.test(a)?CodeMirror.Pass:c.indent(b.htmlMixedState,a)},innerMode:function(b){return{state:b.localState||b.htmlMixedState,mode:b.localMode||c}}}},"xml","javascript","css");CodeMirror.defineMIME("text/x-bbcode","bbcodemixed");