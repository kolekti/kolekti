(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],c):c(CodeMirror)})(function(c){c.defineMode("htmlmixed",function(h,j){function k(a,b){var d=b.htmlState.tagName;d&&(d=d.toLowerCase());var c=e.token(a,b.htmlState);if("script"==d&&/\btag\b/.test(c)&&">"==
a.current()){(d=(d=a.string.slice(Math.max(0,a.pos-100),a.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i))?d[1]:"")&&/[\"\']/.test(d.charAt(0))&&(d=d.slice(1,d.length-1));for(var g=0;g<i.length;++g){var f=i[g];if("string"==typeof f.matches?d==f.matches:f.matches.test(d)){f.mode&&(b.token=q,b.localMode=f.mode,b.localState=f.mode.startState&&f.mode.startState(e.indent(b.htmlState,"")));break}}}else"style"==d&&(/\btag\b/.test(c)&&">"==a.current())&&(b.token=r,b.localMode=l,b.localState=l.startState(e.indent(b.htmlState,
"")));return c}function p(a,b,c){var e=a.current(),g=e.search(b);-1<g?a.backUp(e.length-g):e.match(/<\/?$/)&&(a.backUp(e.length),a.match(b,!1)||a.match(e));return c}function q(a,b){return a.match(/^<\/\s*script\s*>/i,!1)?(b.token=k,b.localState=b.localMode=null):p(a,/<\/\s*script\s*>/,b.localMode.token(a,b.localState))}function r(a,b){return a.match(/^<\/\s*style\s*>/i,!1)?(b.token=k,b.localState=b.localMode=null):p(a,/<\/\s*style\s*>/,l.token(a,b.localState))}var e=c.getMode(h,{name:"xml",htmlMode:!0,
multilineTagIndentFactor:j.multilineTagIndentFactor,multilineTagIndentPastTag:j.multilineTagIndentPastTag}),l=c.getMode(h,"css"),i=[],m=j&&j.scriptTypes;i.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:c.getMode(h,"javascript")});if(m)for(var n=0;n<m.length;++n){var o=m[n];i.push({matches:o.matches,mode:o.mode&&c.getMode(h,o.mode)})}i.push({matches:/./,mode:c.getMode(h,"text/plain")});return{startState:function(){var a=e.startState();return{token:k,localMode:null,localState:null,
htmlState:a}},copyState:function(a){if(a.localState)var b=c.copyState(a.localMode,a.localState);return{token:a.token,localMode:a.localMode,localState:b,htmlState:c.copyState(e,a.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(a,b){return!a.localMode||/^\s*<\//.test(b)?e.indent(a.htmlState,b):a.localMode.indent?a.localMode.indent(a.localState,b):c.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||e}}}},"xml","javascript","css");c.defineMIME("text/html",
"htmlmixed")});